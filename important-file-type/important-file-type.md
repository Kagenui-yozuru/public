# 重要文件类型

熟悉常见文件类型，它们的语法特点和应用场景，能帮助你做出更合理的选择。

## JSON

JSON 是一种用于数据交换的轻量格式，广泛应用于 API、网络传输和数据库存储。它基于 JavaScript 设计，但现在与语言无关，几乎所有编程语言都支持 JSON。

**语法特点**
- **严格**：只允许多余的空格和空行。
- **数据类型**：支持 `string`, `number`, `boolean`, `null`, `array`, `object`。
- **结构化**：`object` 必须用键值对表示，键必须是 `string` 类型。
- **单一根对象**：文件必须包含单个顶层对象或数组，不能有多个独立的结构。

**优缺点**
- **优点**：易读易写，轻量级，广泛使用。
- **缺点**：冗长，特别是数据结构复杂时；不支持注释，不适合作为长期维护的配置文件。

**文件示例**
```json
{
    "name": "Tom",
    "age": 25,
    "isMale": true,
    "purchaseHistory": [
        {"name": "cake", "price": 10.5},
        {"name": "iPad", "price": 699}
    ]
}
```

---

## YAML

YAML 诞生于 2001 年，常用于配置文件。它被设计成一种高度可读的格式，但同时也带来了复杂和不稳定性的问题。  
虽然 YAML 被广泛用于 DevOps 和后端配置文件，但其灵活性反而增加了出错的风险。尤其在处理复杂项目时，格式错误可能难以调试。对于新手，YAML 的复杂语法会增加学习成本。

**语法特点**
- **缩进表示层级**：使用缩进代替标记符号，读写类似自然语言。
- **宽松**：支持无引号字符串，`yes/no` 自动解析为布尔值，允许不同形式的缩进和结构。
- **类型推断**：支持 `string`, `number`, `boolean`, `null`, `array`, `object`，还可以推断复杂数据类型。

**优缺点**
- **优点**：高可读性，易于人类编写；支持复杂的层级结构，适合简单配置文件。
- **缺点**：语法过于灵活，容易引发难以调试的错误；对缩进要求严格，不适合长时间维护或复杂配置。

**文件示例**
```yaml
name: Tom
age: 25
isMale: true
purchaseHistory:
  - name: cake
    price: 10.5
  - name: iPad
    price: 699
```

---

## TOML

TOML 诞生于 2013 年，专门为了解决 YAML 和 JSON 的不足，注重简洁性和明确的层级结构。TOML 被认为是未来配置文件的理想格式。  
TOML 通过简洁的语法解决了 YAML 和 JSON 的局限，尤其在配置文件场景中具有明显优势。然而，它在生态和工具支持上还不够成熟，导致其应用范围相对有限。

**语法特点**
- **键值对**：使用 `key = value` 的形式定义，层次结构通过键名分段实现。
- **类型支持**：支持 `string`, `number`, `boolean`, `array`, `datetime` 等多种数据类型。
- **清晰结构**：通过方括号表示嵌套结构，层次关系一目了然。

**优缺点**
- **优点**：清晰明了，适合维护复杂配置；层级结构明确，适合大型项目。
- **缺点**：支持度仍不如 JSON 和 YAML 广泛；不适合作为数据交换格式。

**文件示例**
```toml
name = "Tom"
age = 25
isMale = true

[[purchaseHistory]]
name = "cake"
price = 10.5

[[purchaseHistory]]
name = "iPad"
price = 699
```

---

## XML

XML 诞生于 1998 年，最初是数据存储和传输的主流格式，但随着更轻量级的格式（如 JSON）的兴起，XML 已逐渐被淘汰。

**语法特点**
- **标记语言**：数据由标签包裹，结构类似于 HTML。
- **严格语法**：每个开始标签必须有相应的结束标签，属性用引号包围。
- **可扩展性**：可以定义复杂的数据结构，支持注释。

**优缺点**
- **优点**：非常灵活，可以描述复杂的数据结构；成熟且标准化。
- **缺点**：文件冗长，结构繁琐；解析速度较慢，难以阅读。

**文件示例**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<user>
    <name>Tom</name>
    <age>25</age>
    <isMale>true</isMale>
    <purchaseHistory>
        <item>
            <name>cake</name>
            <price>10.5</price>
        </item>
        <item>
            <name>iPad</name>
            <price>699</price>
        </item>
    </purchaseHistory>
</user>
```

**劣势**：XML 在需要复杂结构的场景仍有用，但在大多数现代应用中，JSON 和 YAML 等更轻量的格式已取代了它的地位。XML 的冗长和解析效率低下使其在大多数场景中失去了优势。  
一句话，除了陈年老项目，新项目已经不爱用了。  

---

## CSV

CSV 是一种最早出现在 1970 年代的表格数据存储格式，它以逗号分隔值的方式存储数据，广泛应用于数据分析和实验数据中。  
CSV 格式在处理简单表格数据时无可替代，但其简单性也限制了它的应用。对于嵌套结构或复杂类型，其他格式如 JSON、XML 更为合适。  

**语法特点**
- **简单**：每行代表一条记录，字段用逗号分隔。
- **纯文本**：可以在任何文本编辑器中打开。
- **限制**：只支持简单的表格数据，无法表示嵌套结构或复杂类型。

**优缺点**
- **优点**：格式简单，文件小，处理高效；通用性强，支持度广泛。
- **缺点**：不适合复杂数据结构，容易因为逗号和引号的使用导致解析问题。

**文件示例**
```csv
name, age, isMale, purchaseHistory
Tom, 25, true, cake, 10.5
Tom, 25, true, iPad, 699
```

---

## dotenv (.env)

dotenv 文件是一种用于存储环境变量的简单配置文件格式，通常命名为 .env。它在开发过程中广泛用于管理应用程序的配置信息,特别是敏感数据如 API 密钥、数据库凭证等。

**语法特点**
- **键值对**: 每行一个 KEY=VALUE 格式的环境变量定义
- **简单**: 不支持嵌套结构，仅支持字符串类型的值
- **注释**: 支持以 # 开头的单行注释
- **无空格**: 变量名和值之间的等号周围不应有空格
- **无引号**: 值通常不需要引号(除非包含空格)

**优缺点**
- **优点**：
  - 简单易用,学习成本低
  - 安全性好,适合存储敏感信息
  - 与各种开发工具和框架良好集成
  - 便于版本控制(通常使用 .env.example 模板)
- **缺点**：
  - 仅支持扁平的键值结构
  - 不支持数组等复杂数据类型
  - 缺乏数据类型,所有值都是字符串

**文件示例**
```dotenv
# 数据库配置
DB_HOST=localhost
DB_USER=root
DB_PASS=password123
DB_NAME=myapp

# API 密钥
API_KEY=abcd1234
STRIPE_SECRET=sk_test_123456

# 应用配置
APP_ENV=development
DEBUG=true
PORT=3000
```

通常 .env 文件会被添加到 .gitignore 中以避免敏感信息泄露,同时提供一个 .env.example 模板文件作为参考。